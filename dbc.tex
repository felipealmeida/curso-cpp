%% -*- TeX-engine: xetex; mode: LaTeX; eval: (TeX-PDF-mode); coding: utf-8-unix; TeX-master: t; ispell-local-dictionary: "pt_BR"; -*-

\documentclass[14pt]{beamer}

\usepackage[brazil]{babel}
\usepackage[final]{listings}
\usepackage{fontspec}
\usepackage{hyperref}
\usepackage{color}
\usepackage{csquotes}
\usepackage{biblatex}
\usepackage{tikz}

\title{Curso de C++}
\author{Felipe Magno de Almeida}
\date{\today}

\lstset{basicstyle=\small,language=C++,stringstyle=\ttfamily,showstringspaces=false,keywordstyle=\color{blue}}

\begin{document}

\frame
{
  \titlepage
}

\frame
{
  \tableofcontents
}

\section{Programação por Contrato}

\newsavebox{\listingboxa}
\begin{lrbox}{\listingboxa}
\lstinputlisting[mathescape=true,firstline=6,lastline=9]{cpp/divide.cpp}
\end{lrbox}

\frame
{
  \frametitle{Programação por Contrato}

  \usebox{\listingboxa}
}

\newsavebox{\listingboxb}
\begin{lrbox}{\listingboxb}
\lstinputlisting[mathescape=true,firstline=4,lastline=4]{cpp/divide.cpp}
\end{lrbox}

\frame
{
  \frametitle{Programação por Contrato}

  \usebox{\listingboxb}
}

\newsavebox{\listingboxc}
\begin{lrbox}{\listingboxc}
\lstinputlisting[mathescape=true,firstline=2,lastline=4]{cpp/divide.cpp}
\end{lrbox}

\frame
{
  \frametitle{Programação por Contrato}

  \usebox{\listingboxc}
}

\newsavebox{\listingboxd}
\begin{lrbox}{\listingboxd}
\lstinputlisting[mathescape=true,firstline=4,lastline=12]{cpp/divide_exception.cpp}
\end{lrbox}

\frame
{
  \frametitle{Programação por Contrato}

  \usebox{\listingboxd}
}

\newsavebox{\listingboxe}
\begin{lrbox}{\listingboxe}
\lstinputlisting[mathescape=true,firstline=4,lastline=10]{cpp/divide_assert.cpp}
\end{lrbox}

\frame
{
  \frametitle{Programação por Contrato}

  \usebox{\listingboxe}
}

\frame
{
  \frametitle{Programação por Contrato}

  \usebox{\listingboxd}

  \begin{itemize}
  \item Se $lhs = 0$ então lança exceção runtime\_error
  \end{itemize}
}

\frame
{
  \frametitle{Programação por Contrato}

  \usebox{\listingboxe}

  \begin{itemize}
  \item Se $lhs = 0$ então \texttt{undefined behavior}
  \end{itemize}
}

\frame
{
  \frametitle{Undefined Behavior}

  \begin{itemize}
  \item \alert<1>{Qualquer} comportamento é válido
  \item<2-> Pode ser \texttt{implementation defined}
    \begin{itemize}
    \item<3-> Pode ter um comportamento reproduzível
    \end{itemize}
  \item<4-> Pode ter um comportamento aleatório
  \item<5-> Geralmente gera falhas de segurança
  \end{itemize}
}

\newsavebox{\listingboxf}
\begin{lrbox}{\listingboxf}
\lstinputlisting[mathescape=true,firstline=9,lastline=10]{cpp/divide_user.cpp}
\end{lrbox}

\frame
{
  \frametitle{Usando contrato}

  \usebox{\listingboxf}
}

\newsavebox{\listingboxg}
\begin{lrbox}{\listingboxg}
\lstinputlisting[mathescape=true,firstline=7,lastline=10]{cpp/divide_user.cpp}
\end{lrbox}

\frame
{
  \frametitle{Usando contrato}

  \usebox{\listingboxg}
}

\newsavebox{\listingboxh}
\begin{lrbox}{\listingboxh}
\lstinputlisting[mathescape=true,firstline=15,lastline=18]{cpp/divide_user.cpp}
\end{lrbox}

\frame
{
  \frametitle{Usando contrato}

  \usebox{\listingboxh}
}

\newsavebox{\listingboxi}
\begin{lrbox}{\listingboxi}
\lstinputlisting[mathescape=true,firstline=12,lastline=18]{cpp/divide_user.cpp}
\end{lrbox}

\frame
{
  \frametitle{Usando contrato}

  \usebox{\listingboxi}
}

\frame
{
  \frametitle{Usando contrato}

  \begin{figure}
    \centering
    
    \begin{tikzpicture}[node distance=1.5cm]

      \path (-4, 0);
      \path (5, 0);
      
      \node<-1> at (-3, 0) [draw,rectangle,inner sep=0pt,minimum width=1cm,minimum height=1cm] (E0) {2};
      \node<2-> at (-3, 0) [fill=green!20,draw,rectangle,inner sep=0pt,minimum width=1cm,minimum height=1cm] (E0) {1};

      \node<-2> at (-2, 0) [draw,rectangle,inner sep=0pt,minimum width=1cm,minimum height=1cm] (E1) {4};
      \node<3-> at (-2, 0) [fill=green!20,draw,rectangle,inner sep=0pt,minimum width=1cm,minimum height=1cm] (E1) {2};

      \node<-3> at (-1, 0) [draw,rectangle,inner sep=0pt,minimum width=1cm,minimum height=1cm] (E2) {8};
      \node<4-> at (-1, 0) [fill=green!20,draw,rectangle,inner sep=0pt,minimum width=1cm,minimum height=1cm] (E2) {4};

      \node<-4> at ( 0, 0) [draw,rectangle,inner sep=0pt,minimum width=1cm,minimum height=1cm] (E3) {10};
      \node<5-> at ( 0, 0) [fill=green!20,draw,rectangle,inner sep=0pt,minimum width=1cm,minimum height=1cm] (E3) {5};

      \node<-5> at ( 1, 0) [draw,rectangle,inner sep=0pt,minimum width=1cm,minimum height=1cm] (E4) {52};
      \node<6-> at ( 1, 0) [fill=green!20,draw,rectangle,inner sep=0pt,minimum width=1cm,minimum height=1cm] (E4) {26};

      \node<-6> at ( 2, 0) [draw,rectangle,inner sep=0pt,minimum width=1cm,minimum height=1cm] (E5) {108};
      \node<7-> at ( 2, 0) [fill=green!20,draw,rectangle,inner sep=0pt,minimum width=1cm,minimum height=1cm] (E5) {54};

      \node at ( 3, 0) [rectangle,inner sep=0pt,minimum width=1cm,minimum height=1cm] (Size) {};

      \node<-6> [above of=Size] (SizeDesc) {$size$};
      \node<7> [above of=Size] (SizeDesc) {$i = size$};
      \draw [->] (SizeDesc) -- (Size);

      \node<1> [above of=E0] (i) {$i$};
      \draw<1> [->] (i) -- (E0);

      \node<2> [above of=E1] (i) {$i$};
      \draw<2> [->] (i) -- (E1);

      \node<3> [above of=E2] (i) {$i$};
      \draw<3> [->] (i) -- (E2);

      \node<4> [above of=E3] (i) {$i$};
      \draw<4> [->] (i) -- (E3);

      \node<5> [above of=E4] (i) {$i$};
      \draw<5> [->] (i) -- (E4);

      \node<6> [above of=E5] (i) {$i$};
      \draw<6> [->] (i) -- (E5);

    \end{tikzpicture}
  \end{figure}
}

\newsavebox{\listingboxj}
\begin{lrbox}{\listingboxj}
\lstinputlisting[mathescape=true,firstline=12,lastline=19]{cpp/divide_user.cpp}
\end{lrbox}

\frame
{
  \frametitle{Usando contrato}

  \usebox{\listingboxj}
}

\newsavebox{\listingboxk}
\begin{lrbox}{\listingboxk}
\lstinputlisting[mathescape=true,firstline=8,lastline=8]{cpp/divide_user.cpp}
\end{lrbox}

\newsavebox{\listingboxl}
\begin{lrbox}{\listingboxl}
\lstinputlisting[mathescape=true,firstline=21,lastline=21]{cpp/divide_user.cpp}
\end{lrbox}

\frame
{
  \frametitle{Usando contrato}

  \usebox{\listingboxk}
  \usebox{\listingboxl}
}

\frame
{
  \frametitle{Objetos}

  
}

\end{document}

